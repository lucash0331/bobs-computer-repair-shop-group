<!--
============================================
; Title: WEB450 Bob's Computer Repair SHop
; Author: Professor Krasso
; Date: April 23, 2022
; Modified By: House Gryffindor
; Description: Bob's Computer Repair Shop App - Signin
===========================================
-->

<div fxLayout="column" class="signin-div">
  <mat-card fxFlex class="mat-elevation-z8 signin-container">
    <mat-card-content>
      <mat-tab-group>
        <mat-tab label="Sign in">
          <div class="msg-error" *ngIf="errorMessage">
            {{ errorMessage }}
          </div>

          <mat-card class="mat-elevation-z0" fxLayout="column" fxLayoutGap="10px">
            <form [formGroup]="form" (ngSubmit)="onSubmit(); form.reset()" #loginForm="ngForm">
              <mat-card-content>
                <mat-form-field fxFlex appearance="fill">
                  <mat-label for="txtUserName" id="lbluserName">Username</mat-label>
                  <input type="text" matInput [formControl]="form.controls['userName']" id="txtUserName" name="txtUserName" />
                  <mat-error class="error" *ngIf="form.controls.userName.hasError('required') && form.controls.userName.touched"
                    >You must enter a username.</mat-error
                  >
                </mat-form-field>
              </mat-card-content>
              <mat-card-content>
                <mat-form-field fxFlex appearance="fill">
                  <mat-label for="pswdPassword" id="lblpassword">Password</mat-label>
                  <input type="password" matInput [formControl]="form.controls['password']" id="pswdPassword" name="pswdPassword" />
                  <mat-error class="error" *ngIf="form.controls.password.hasError('required') && form.controls.password.touched"
                    >You must enter a password.</mat-error
                  >
                </mat-form-field>
              </mat-card-content>

              <mat-card-actions>
                <button type="submit" [disabled]="!form.valid" fxFlex mat-raised-button>Submit</button>
              </mat-card-actions>
              <mat-card-content> <a routerLink="/session/forgot-password" class="change-password">Forgot password?</a> </mat-card-content>
            </form>
          </mat-card>
        </mat-tab>
        <mat-tab label="Sign up">
          <mat-vertical-stepper #stepper linear>
            <mat-step fxFlex [stepControl]="contactForm" class="required" errorMessage="Contact is required">
              <form [formGroup]="contactForm">
                <ng-template matStepLabel>Contact Information</ng-template>
                <br />
                <mat-list>
                  <mat-list-item>
                    <mat-form-field fxFlex appearance="fill">
                      <mat-label>First Name</mat-label>
                      <input matInput [formControl]="contactForm.controls['firstName']" />
                      <mat-error
                        class="error"
                        *ngIf="contactForm.controls['firstName'].hasError('required') && contactForm.controls['firstName'].touched"
                      >
                        First name is a required field.
                      </mat-error>
                    </mat-form-field>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <mat-form-field fxFlex appearance="fill">
                      <mat-label>Last Name</mat-label>
                      <input matInput [formControl]="contactForm.controls['lastName']" />
                      <mat-error
                        class="error"
                        *ngIf="contactForm.controls['lastName'].hasError('required') && contactForm.controls['lastName'].touched"
                      >
                        Last name is a required field.
                      </mat-error>
                    </mat-form-field>
                  </mat-list-item>
                  <br />
                  <br />
                  <mat-list-item>
                    <mat-form-field fxFlex appearance="fill">
                      <mat-label>Phone number</mat-label>
                      <input matInput [formControl]="contactForm.controls['phoneNumber']" />
                      <mat-error
                        class="error"
                        *ngIf="contactForm.controls['phoneNumber'].hasError('required') && contactForm.controls['phoneNumber'].touched"
                      >
                        Phone number is a required field.
                      </mat-error>
                    </mat-form-field>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <mat-form-field fxFlex appearance="fill">
                      <mat-label>Email</mat-label>
                      <input matInput [formControl]="contactForm.controls['email']" />
                      <mat-error class="error" *ngIf="contactForm.controls['email'].hasError('required') && contactForm.controls['email'].touched">
                        Email is a required field.
                      </mat-error>
                      <mat-error class="error" *ngIf="contactForm.controls['email'].hasError('email') && contactForm.controls['email'].touched">
                        Invalid email format.
                      </mat-error>
                    </mat-form-field>
                  </mat-list-item>
                  <br />
                  <br />
                  <mat-list-item>
                    <mat-form-field fxFlex appearance="fill">
                      <mat-label>Address</mat-label>
                      <input matInput [formControl]="contactForm.controls['address']" />
                      <mat-error
                        class="error"
                        *ngIf="contactForm.controls['address'].hasError('required') && contactForm.controls['address'].touched"
                      >
                        Address is a required field
                      </mat-error>
                    </mat-form-field>
                  </mat-list-item>
                </mat-list>
                <div fxLayoutAlign="end">
                  <button mat-raised-button color="accent" matStepperNext>Next</button>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="securityQuestionsForm" errorMessage="Security questions are required">
              <form [formGroup]="securityQuestionsForm">
                <ng-template matStepLabel="Security Questions"></ng-template>
              </form>
            </mat-step>
          </mat-vertical-stepper>
        </mat-tab>
      </mat-tab-group>
    </mat-card-content>
  </mat-card>
</div>
